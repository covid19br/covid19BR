---
title: "Observatório COVID-19 SP"
date: "`r format(Sys.time(), '%d de %B de %Y, %H:%M')`"
output:
 flexdashboard::flex_dashboard:
  storyboard: true
  self_contained: false
  lib_dir: ../libs
  source: embed
  source_code: "https://github.com/covid19br/covid19br.github.io"
  social: menu
  css: styles.css
  navbar:
    - { title: "Início", href: "../index.html", align: left}
    - { title: "São Paulo", href: "index.html", align: left}
    - { title: "+Info", href: "../informacoes.html", align: left}
    - { title: "Fontes", href: "../fontes.html", align: left}
    - { title: "Sobre", href: "../sobre.html", align: left}
  favicon: favicon.png
  includes:
   after_body: ../../_src/footer.html
   in_header: ../../_src/header.html
---

```{r setOptions, include=FALSE, message=FALSE}
library(flexdashboard)
#library(xtable)
library(knitr)
library(plotly)
options(OutDec = ',')
knitr::opts_chunk$set(echo=FALSE, warnings=FALSE, message=FALSE, fig.width=8, fig.height=6)
```

### Quantos casos já temos em São Paulo? Quantos teremos nos próximos dias?

```{r}

ggplotly(plot.forecast.exp, tooltip = "text")
##plot.forecast.exp

```

***

Pontos pretos indicam o número de casos confirmados em São Paulo por dia.
**Pontos em laranja são a previsão para os próximos 5 dias (entre 
`r  as.integer(exp.5d[max(nrow(exp.5d)),2])` e `r as.integer(exp.5d[max(nrow(exp.5d)),3])` 
casos em `r format(max(time(exp.5d)), "%d/%m/%Y")` )**, se a taxa de
crescimento continuar a mesma dos últimos 5 dias. Em cinza é o
intervalo de confiança dessa previsão. 

#### Por que só 5 dias?

Porque quando o crescimento é exponencial as incertezas também crescem
exponencialmente. Por isso a região cinza, que expressa a
incerteza da previsão, aumenta de largura com
o tempo.  E mesmo pequenas mudanças na taxa que aconteçam
hoje ou amanhã vão causar enormes variações no futuro. 

Por isso avaliamos que é inadequado fazer
previsões para mais de 5 dias com este método.


### Quão rápido a doença se propaga?

```{r}
##plot.tempo.dupl
ggplotly(plot.tempo.dupl)
```

***

O tempo de duplicação indica **quanto tempo leva para dobrar o número de casos confirmados** em São Paulo. 
Quanto menor esse número, mais rápido a
doença está se espalhando. Esse número depende muito das medidas
de contenção da doença. **A estimativa de hoje é  entre 
`r as.vector(round(tempos.duplicacao[max(nrow(tempos.duplicacao)),2], 1))` e 
`r as.vector(round(tempos.duplicacao[max(nrow(tempos.duplicacao)),3], 1))` dias**.

A linha azul no gráfico mostra o tempo de duplicação estimado a
intervalos de 5 dias (as datas indicam o fim de cada um desses
intervalos). A faixa cinza é o intervalo de confiança desses tempos de
duplicação. O intervalo largo mostra que a incerteza é
grande, mas mesmo assim vemos que tempos de duplicação variam à medida
que o tempo passa. 



### Para quantas pessoas cada infectado transmite a doença?

```{r}
##plot.estimate.R0
ggplotly(plot.estimate.R0)
```

***

O Número Reprodutivo efetivo ($R_e$) é a média de pessoas contaminadas
por um infectado.  **Números reprodutivos maiores que um indicam que a
doença está se espalhando**. Marcamos este limite com uma linha vermelha.

Estimamos o $R_e$ da epidemia de COVID-19 no Brasil diariamente.
**No momento o $R_e$ está entre 
`r round(res.uncertain.si$R[nrow(res.uncertain.si$R), 5],1)` e
 `r round(res.uncertain.si$R[nrow(res.uncertain.si$R), 11],1)` **.
 
A linha azul no gráfico mostra a estimativa de $R_e$ a intervalos de 7
dias (as datas indicam o fim de cada um desses intervalos). A faixa
cinza é o intervalo de confiança dessas estimativas.  Esse intervalo
tem 95% de chance de incluir o valor real de $R_e$. No momento há uma
grande incerteza quanto ao valor de $R_e$. Mas mesmo **o limite mínimo
do intervalo de confiança está bem acima de um, indicando que a
epidemia está em expansão rápida**.

